# 排序与查找

从排序与查找中，我们所得到的是一种不单单限定于特定的问题，而可拓展至多处的思想或方法论。

## 排序的概念

对给定的序列 $A$，定义 $A$ 中元素间的一组偏序关系，对 $A$ 执行一种算法，使得 $A$ 中元素重新排列，且前后顺序符合该偏序关系的过程被称作排序。

### 稳定与不稳定

称一种排序算法是稳定的，当且仅当在排序前后，$A$ 中任意两个在该偏序关系下相等的元素的前后顺序一定没有发生改变。

举例：对元素 $(2,1),(1,1),(2,2)$，定义偏序关系为比较有序二元组中的第一项，较小者较小，那么稳定的排序得到的结果一定是 $(1,1),(2,1),(2,2)$，而不稳定的排序得到的结果可能是 $(1,1),(2,2),(2,1)$。

## 排序的方法

### 基于值域的排序

- 桶排序

  问题：给定 $N=10^7$ 个数，值域为 $10^7$，试对其进行排序。

  思考：望文生义，桶的定义为何？如何利用值域不大的性质来进行排序？

  问题：给定 $N=10^7$ 个数，值域为 $10^{18}$，保证数据在值域中均匀分布，是对其进行排序。

  思考：如何利用在复杂度分析的平衡复杂度一节中已经提到的方法解决这一问题？

  该排序方法的稳定性如何？![counting sort animate example](https://oi-wiki.org/basic/images/counting-sort-1-animate-example.svg)

- 基数排序

  问题：给定 $N=10^6$ 个数，值域为 $10^9$，在不直接比较任意两个数的前提下，试对其进行排序。

  ![一个 LSD 基数排序全流程的例子](https://oi-wiki.org/basic/images/radix-sort-1.png)

  这种排序算法的稳定性如何？

### 基于交换的排序

问题：给定 $N=1000$ 个数，值域为 $10^{18}$，试对其进行排序。

- 选择排序

  一位一位的确定最终序列中的数。

  每次找出第 $i$ 小的元素，将其置于序列的第 $i$ 个位置上。

  ![selection sort animate example](https://oi-wiki.org/basic/images/selection-sort-1-animate-example.svg)

  思考：这种排序是稳定的吗？为什么？

- 冒泡排序

  - 逆序对：一个序列的逆序对是序列中的一对数 $(a_i,a_j)$，满足 $a_i < a_j$，$i>j$。

    思考：一个序列最多存在多少逆序对？ 

  每次检查相邻两个元素，若不满足偏序条件，则交换之。直至无法找到这样的相邻元素位置。

  思考：冒泡排序的时间复杂度如何证明？冒泡排序最多进行多少次交换？可以预先确定冒泡排序的交换次数吗？这种排序是稳定的吗？

- 插入排序

  将序列分为已排序和未排序两部分，每次在已排序部分的对应位置插入未排序部分中的一个元素。

  ![insertion sort animate example](https://oi-wiki.org/basic/images/insertion-sort-1-animate-example.svg)

  思考：这种排序是稳定的吗？这种排序的平均时间复杂度是多少？

#### 分治

对于难以解决的一个比较大的问题，我们可以通过将其拆分成若干个较小的更容易解决的问题，通过依次解决较小的问题，再将较小的问题的结果合并的方式得到大问题的答案。

在这样解决问题的时候，我们往往可以嵌套着去做。即对小的问题再拆分成更小的问题……直至拆分成最容易解决的不可分问题，再一层一层合并回去。

也就是

1. 分解原问题为结构相同的子问题。
2. 分解到某个容易求解的边界之后，进行递归求解。
3. 将子问题的解合并成原问题的解。

要求则是

- 该问题的规模缩小到一定的程度就可以容易地解决。
- 该问题可以分解为若干个规模较小的相同问题，利用该问题分解出的子问题的解可以合并为该问题的解。
- 该问题所分解出的各个子问题相互独立或可以容易的讨论公共子问题。

这是一种递归的做法。如果每次分为两份，划分和合并所需要的时间为 $O(n)$，那么最终的时间复杂度是？

问题：给定 $N=10^6$ 个数，值域为 $10^{18}$，试对其进行排序。

- 快速排序

  每次把数列以某个数为界，按大小分成两部分。再分治的处理该问题，直至仅有一个数，随后返回并逐层合并。

  思考：这种排序是稳定的吗？如果我们随机选择一个数为界，那么时间是？如何让其时间复杂度变的稳定？

- 归并排序

  每次把数列划分成等长的两部分，随后分治的处理该问题。长度为一时，数列已经有序。合并两个子问题时，每次选择两部分最前的元素中较小的那一项加入到结果数列中。

  思考：这种排序是稳定的吗？时间复杂度是？需要花额外的空间吗？如果是，需要花多少？

  拓展：这种方法能否用来计算逆序对？

## 二分法

问题：给定 $N$ 个数，构成一升序序列，要求判断给定的数 $k$ 在该数列中的大小位置。

思考：在什么情况下，我们要应用这样的方法？

拓展：如果我们不能简单的求出答案，却可以判断答案是否合法。又满足单调性？

https://www.luogu.com.cn/problem/P1873

### 三分法

问题：给定 $N$ 个数，构成一单峰函数，求其极值点。